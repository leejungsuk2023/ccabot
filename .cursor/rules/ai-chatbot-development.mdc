# AI ì±—ë´‡ ê°œë°œ ë° ë°ì´í„° ê´€ë¦¬ ê°€ì´ë“œ

## ğŸ§  AI ë‘ë‡Œ ì—…ë°ì´íŠ¸ ì‹œìŠ¤í…œ

### í•µì‹¬ êµ¬ì„± ìš”ì†Œ
- **CSV ë°ì´í„° ì†ŒìŠ¤**: [functions/products.csv](mdc:functions/products.csv), [functions/promotions.csv](mdc:functions/promotions.csv), [functions/faqs.csv](mdc:functions/faqs.csv)
- **ì—…ë°ì´íŠ¸ ìŠ¤í¬ë¦½íŠ¸**: [functions/update_ai_brain.js](mdc:functions/update_ai_brain.js)
- **Firestore ì €ì¥ì†Œ**: knowledge_base, policyContext ì»¬ë ‰ì…˜

### ë°ì´í„° íë¦„
```
CSV íŒŒì¼ â†’ Node.js ìŠ¤í¬ë¦½íŠ¸ â†’ Firestore â†’ AI ì±—ë´‡ ì‘ë‹µ
```

## ğŸ“Š CSV íŒŒì¼ êµ¬ì¡°

### products.csv (ì‹œìˆ  ì •ë³´)
```csv
id,name,price_thb,description
p1,"ìŠˆë§í¬ ë¦¬í”„íŒ… (300ìƒ·)",2900,"í”¼ë¶€ íƒ„ë ¥ê³¼ Vë¼ì¸ ë¦¬í”„íŒ…..."
```

### promotions.csv (í”„ë¡œëª¨ì…˜ ì •ë³´)
```csv
id,title,description,related_product_id
promo1,"ì²« ë°©ë¬¸ ê³ ê° ì´ë²¤íŠ¸","ìƒë‹´ í›„ ë‹¹ì¼ ì‹œìˆ  ì˜ˆì•½ ì‹œ 15% í• ì¸","all"
```

### faqs.csv (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸)
```csv
id,question,answer
faq1,"ê°€ê²©ì´ ê¶ê¸ˆí•´ìš”","ë„¤, ë¬¸ì˜ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤..."
```

## ğŸ¯ AI í–‰ë™ ì§€ì¹¨ (í”¼ë¶€ê³¼ ì˜ˆì•½ í•„ìŠ¹ê³µì‹ v1.0)

### í•µì‹¬ ì „ëµ
1. **í”„ë¡œëª¨ì…˜ ì„ ì œì‹œ**: ì²« ì§ˆë¬¸ë¶€í„° í• ì¸ í˜œíƒ ì œì‹œ
2. **êµ¬ì²´ì  ì •ë³´ ì œê³µ**: knowledge_base ë°ì´í„° í™œìš©
3. **ì„ ì œì  ì˜ˆì•½ ì œì•ˆ**: êµ¬ì²´ì ì¸ ì‹œê°„ê³¼ í•¨ê»˜ ì˜ˆì•½ ìœ ë„
4. **ì–¸ì–´ ì¼ì¹˜**: ê³ ê° ì–¸ì–´ì™€ ë™ì¼í•œ ì–¸ì–´ë¡œ ì‘ë‹µ

### ë°ì´í„° í™œìš© ë°©ë²•
- **ì‹œìˆ  ê°€ê²©**: `knowledge_base/products`ì˜ `price_thb` ì •ë³´
- **í”„ë¡œëª¨ì…˜**: `knowledge_base/promotions`ì˜ í• ì¸ í˜œíƒ
- **FAQ**: `knowledge_base/faqs`ì˜ ë‹µë³€ í…œí”Œë¦¿

## ğŸ”§ ê¸°ìˆ ì  êµ¬í˜„

### Firebase Functions êµ¬ì¡°
- [functions/index.js](mdc:functions/index.js) - ë©”ì¸ ì›¹í›… í•¨ìˆ˜
- [functions/update_ai_brain.js](mdc:functions/update_ai_brain.js) - AI ì—…ë°ì´íŠ¸ í•¨ìˆ˜
- HTTP íŠ¸ë¦¬ê±°ë¡œ ì›¹ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥

### ì˜ì¡´ì„± ê´€ë¦¬
- `csv-parser`: CSV íŒŒì¼ ì½ê¸°
- `firebase-admin`: Firestore ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼
- `firebase-functions/v2`: Firebase Functions v2 ë¬¸ë²•

## ğŸš€ ë°°í¬ ë° ì‹¤í–‰

### ë°°í¬ ëª…ë ¹ì–´
```bash
# íŠ¹ì • í•¨ìˆ˜ë§Œ ë°°í¬
firebase deploy --only functions:updateAIBrainHttp

# ì „ì²´ í•¨ìˆ˜ ë°°í¬
firebase deploy --only functions
```

### ì‹¤í–‰ ë°©ë²•
```bash
# ì›¹ API í˜¸ì¶œ
curl "https://asia-northeast3-careconnectai-51631.cloudfunctions.net/updateAIBrainHttp"

# ë¡œì»¬ ì‹¤í–‰ (Firebase Functions í™˜ê²½ì—ì„œë§Œ)
node update_ai_brain.js
```

## ğŸ” ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§

### ë¡œê·¸ í™•ì¸
- Firebase Consoleì—ì„œ í•¨ìˆ˜ ë¡œê·¸ í™•ì¸
- ì‹¤ì‹œê°„ ì—ëŸ¬ ëª¨ë‹ˆí„°ë§
- ì„±ê³µ/ì‹¤íŒ¨ ì‘ë‹µ í™•ì¸

### ë°ì´í„° ê²€ì¦
- Firestore Consoleì—ì„œ ì—…ë°ì´íŠ¸ëœ ë°ì´í„° í™•ì¸
- CSV íŒŒì¼ ë‚´ìš©ê³¼ Firestore ë°ì´í„° ì¼ì¹˜ì„± ê²€ì¦
- AI ì‘ë‹µ í’ˆì§ˆ í…ŒìŠ¤íŠ¸

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- CSV íŒŒì¼ í¬ê¸° ì œí•œ (1MB ì´í•˜ ê¶Œì¥)
- Firestore ë°°ì¹˜ ì‘ì—… ì‚¬ìš©
- ë¶ˆí•„ìš”í•œ ë°ì´í„° ë¡œë”© ë°©ì§€

### ì‘ë‹µ ì‹œê°„
- ë¹„ë™ê¸° ì²˜ë¦¬ í™œìš©
- ì—ëŸ¬ í•¸ë“¤ë§ ìµœì í™”
- íƒ€ì„ì•„ì›ƒ ì„¤ì • ê´€ë¦¬
description:
globs:
alwaysApply: false
---
